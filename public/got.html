<html>
<head>
<script src="cytoscape.min.js"></script>
</head>
<body>
<div id="container">
  <style>
  #cy {
  width: 2000px;
  height:1000px;
  display: block;
}
  </style>
  <div id="cy"></div>
</div>
<script>
var req = new XMLHttpRequest();

req.open('GET', '/.netlify/functions/nodes',false);
req.send(null);

if(req.status == 200) {
    //var nodes = JSON.parse(req.responseText);
        var nodes = req.responseText;
			
			var req2 = new XMLHttpRequest();

			req2.open('GET', '/.netlify/functions/edges',false);
			req2.send(null);

			if(req.status == 200) {
				 //var nodes = JSON.parse(req.responseText);
				
				var edges = req2.responseText;
					
				
			}
	
}
//var got = nodes + edges;
//console.log(JSON.parse(got));
//console.log(JSON.parse(edges));

var cy = cytoscape(
{
container: document.getElementById('cy'), // container to render in
// list of graph elements to start with
  elements: [nodes + ',' + edges],

  style: [
    {
      selector: "node",
      css: {
        "label": "data(label)",
        "text-valign": "center",
        "text-halign": "center",
        'background-color': '#30c9bc'

      }
    },
    {
      selector: "edge",
      css: {
        "target-arrow-shape": "triangle",
		  'line-color': '#a8eae5'
      }
    },
    {
      selector: ".background",
      css: {
        "text-background-opacity": 1,
        "color": "#fff",
        "text-background-color": "#000"
      }
    },
    {
      selector: ".outline",
      css: {
        "color": "#fff",
        "text-outline-color": "#000",
        "text-outline-width": 3
      }
    },
    {
      selector: ".top-center",
      style: {
        "text-valign": "top",
        "text-halign": "center"
      }
    }
  ],

  layout: {
    name: 'concentric',
	fit: true,
	padding: 30
  }

});
cy.zoomingEnabled( true );
cy.zoom({
  level: .25
});
cy.bind('click ', 'node', function (evt) {
    var pos = cy.nodes("[id = " + evt.target.data().id + "]").position();
    cy.zoom({                       // Zoom to the specified position
      level: 1.5,             // 0 <= yourLevel, maybe try out 1,2,3,4... and see what fits
      position: pos
    });
});

</script>



</body>
</html>